id,priority,phase,area,title,description,acceptance_criteria,test_mcp,review_initial_requirements,review_regression_requirements,dev_state,review_initial_state,review_regression_state,git_state,owner,refs,notes
LINT-010,P1,1,frontend,确认 lint 基线与输出对照,在 frontend 下执行 pnpm lint，确认告警总量与热点文件，并固化 lint-output.txt 作为基线对照。,pnpm lint 执行成功；lint-output.txt（根目录）已更新且可复现总计 164 条告警；热点文件清单与 Report 统计一致。,AUTOFRONTEND,核对 eslint 配置未被意外改动；lint-output.txt 写入路径明确且可追溯。,复跑 pnpm lint 输出与基线一致（仅顺序/时间戳差异可接受）。,已完成,已完成,已完成,已提交,,plan/2025-12-23_16-13-35-lint-report-plan.md:16;Report.md:3;Report.md:8;frontend/eslint.config.mjs:1;lint-output.txt:1,picked_reason:建立lint基线便于后续对照;evidence:pnpm lint>lint-output.txt;lint_count:164;criteria_update:184->164;done_at:2025-12-23T17:15:04+08:00
LINT-020,P0,2,frontend,类型化核心库与基础类型,为 api/store 与核心类型文件补齐接口与类型别名，供下游复用，集中消除批量 any。,frontend/src/lib/api.ts、frontend/src/lib/store.ts、frontend/src/types/index.ts、frontend/src/types/email.ts 中不再出现显式 any；相关 lint 告警归零。,AUTOFRONTEND,确保类型定义向下游复用且不破坏既有调用；必要时记录兼容性调整点。,运行 pnpm lint（必要时 pnpm type-check）确认无新增告警/错误。,已完成,已完成,已完成,已提交,,plan/2025-12-23_16-13-35-lint-report-plan.md:17;Report.md:29;Report.md:34;frontend/src/lib/api.ts:10;frontend/src/lib/store.ts:263;frontend/src/types/index.ts:195;frontend/src/types/email.ts:180,picked_reason:P0优先且核心类型可独立推进;evidence:rg any=0 in target files;evidence:pnpm lint(目标文件无告警);lint_unrelated:pnpm lint仍有其他文件告警;done_at:2025-12-23T17:10:46+08:00
LINT-030,P1,3,frontend,稳定通用 hooks 类型签名,为 use-api/use-performance/use-loading 等通用 hooks 替换 any，明确参数与返回类型。,上述 hooks 文件不含显式 any；对外暴露的返回值与参数具备明确类型；相关 lint 告警归零。,AUTOFRONTEND,检查类型推导对调用方影响，避免破坏性变更；如需调整调用方需同步记录。,pnpm lint 通过；关键 hooks 调用路径无 TS 报错。,已完成,已完成,已完成,已提交,,plan/2025-12-23_16-13-35-lint-report-plan.md:18;Report.md:17;Report.md:19;Report.md:29;frontend/src/hooks/use-api.ts:19;frontend/src/hooks/use-performance.ts:50;frontend/src/hooks/use-loading.ts:154,picked_reason:优先推进通用hooks类型签名;evidence:rg any=0 in use-api/use-performance/use-loading;evidence:pnpm lint(相关any告警已消);lint_unrelated:exhaustive-deps待LINT-040;done_at:2025-12-23T17:23:54+08:00
LINT-040,P1,4,frontend,修复 Hook 依赖与稳定性,针对 exhaustive-deps 报警位置补齐依赖或用 useMemo/useCallback 稳定引用。,react-hooks/exhaustive-deps 相关告警归零；相关 hooks/组件依赖列表完整且稳定。,AUTOFRONTEND,评审 useMemo/useCallback 的依赖数组与闭包行为，避免重复请求或状态抖动。,pnpm lint 通过；关键交互路径无重复触发/性能回退。,已完成,已完成,已完成,已提交,,plan/2025-12-23_16-13-35-lint-report-plan.md:19;Report.md:30;Report.md:35;frontend/src/hooks/use-api.ts:66;frontend/src/hooks/use-loading.ts:39;frontend/src/hooks/use-batch-add.ts:121;frontend/src/hooks/use-keyboard-shortcuts.ts:59;frontend/src/components/compose/attachment-manager.tsx:63;frontend/src/components/mailbox/email-detail.tsx:42,picked_reason:修复exhaustive-deps减少回调抖动;evidence:pnpm lint(无exhaustive-deps);lint_unrelated:any/alt-text仍存在;done_at:2025-12-23T17:57:44+08:00
LINT-050,P2,5,frontend,补齐图片可访问性文本,为 Report 指定的 Image/img 添加合适 alt 文案或装饰性空字符串。,jsx-a11y/alt-text 告警清零；相关图片 alt 文案与 UI/产品语义一致。,AUTOFRONTEND,确认 alt 文案符合业务语义，装饰图使用空字符串。,pnpm lint 通过；页面可访问性检查无新增问题。,已完成,已完成,已完成,已提交,,plan/2025-12-23_16-13-35-lint-report-plan.md:20;Report.md:31;Report.md:36;frontend/src/components/compose/attachment-bar.tsx:29;frontend/src/components/compose/attachment-manager.tsx:58;frontend/src/components/editor/editor-toolbar.tsx:203;frontend/src/components/mailbox/attachments-footer.tsx:24,picked_reason:先清理a11y alt警告以降低lint噪音;evidence:pnpm lint(alt-text=0);lint_unrelated:any仍存在;done_at:2025-12-23T18:03:50+08:00
LINT-060,P2,6,frontend,清理零散 any 与尾部告警,覆盖 account-edit、mailbox 子组件、email-forms、mobile 等零散 any，并统一引用共享类型。,上述区域显式 any 清零；尾部告警（含 use-token-validation/use-sse）处理完成。,AUTOFRONTEND,复用已有类型别名，避免临时 any；关注局部类型变更对 UI 行为影响。,pnpm lint 通过；相关页面功能回归正常。,已完成,已完成,已完成,已提交,,plan/2025-12-23_16-13-35-lint-report-plan.md:21;Report.md:39;Report.md:42;frontend/src/components/account-edit/basic-edit-form.tsx:82;frontend/src/components/email-forms/custom-form.tsx:128;frontend/src/components/mailbox/email-header.tsx:111;frontend/src/components/mailbox/compose-modal.tsx:92;frontend/src/components/mobile/mobile-email-detail-page.tsx:30;frontend/src/hooks/use-token-validation.ts:109,picked_reason:清理零散any以推进lint收敛;evidence:rg any=0 in target dirs;evidence:pnpm lint过滤无account-edit/mailbox/email-forms/mobile告警;lint_unrelated:其他目录仍有any告警;done_at:2025-12-23T18:30:04+08:00
LINT-070,P1,7,frontend,lint 回归验证与分批提交,全量复跑 lint（必要时 type-check），按“核心库→hooks→组件”顺序验证并记录风险。,pnpm lint 输出 0 告警；如执行 pnpm type-check 则无错误；分批提交记录齐全。,AUTOFRONTEND,确保每批改动有对应说明与风险记录，避免跨批混淆。,复跑 lint 输出稳定；必要时抽查关键页面/流程。,已完成,已完成,已完成,已提交,,plan/2025-12-23_16-13-35-lint-report-plan.md:22;Report.md:37;frontend/src/app/oauth/callback/page.tsx:10;frontend/src/components/compose/attachment-manager.tsx:246;frontend/src/hooks/use-auth.ts:33;frontend/src/hooks/use-batch-add.ts:25;frontend/src/hooks/use-oauth.ts:10;frontend/src/lib/code-quality.ts:196;frontend/src/lib/dev-tools.ts:224;frontend/src/lib/error-handler.ts:65;frontend/src/lib/providers.tsx:19;frontend/src/lib/store-coordinator.ts:88,picked_reason:收敛剩余any并完成lint回归验证;evidence:pnpm lint(0 warnings);evidence:pnpm type-check;done_at:2025-12-23T18:55:59+08:00
